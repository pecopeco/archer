window.__require=function t(e,o,n){function c(r,a){if(!o[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+r+"'")}}var d=o[r]={exports:{}};e[r][0].call(d.exports,function(t){return c(e[r][1][t]||t)},d,d.exports,t,e,o,n)}return o[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<n.length;r++)c(n[r]);return c}({arch:[function(t,e,o){"use strict";cc._RF.push(e,"79de6Ww+JhPxLpZQ8kiVuxY","arch"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},update:function(t){}}),cc._RF.pop()},{}],arrow:[function(t,e,o){"use strict";cc._RF.push(e,"1b48d35Fp5KwZWfGAjoxBjf","arrow"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this;this.startX=this.node.x,this.startY=this.node.y,this.fly=!1,this.yLength=0,this.xLength=0,this.arrowRotation=0,this.node.on("touchstart",function(t){}),this.node.on("touchmove",function(e){t.xLength=t.node.convertToNodeSpaceAR(e.getLocation()).x-t.node.convertToNodeSpaceAR(e.getStartLocation()).x,t.yLength=t.node.convertToNodeSpaceAR(e.getLocation()).y-t.node.convertToNodeSpaceAR(e.getStartLocation()).y,t.arrowRotation=180*Math.atan(t.xLength/(t.yLength-50))/Math.PI,t.node.parent.rotation=t.arrowRotation,t.yLength>0||t.yLength<-562||(t.node.y=t.startY+t.yLength)}),this.node.on("touchend",function(e){t.yLength>=0||(t.fly=!0)}),this.node.on("touchcancel",function(e){t.yLength>=0||(t.fly=!0)})},start:function(){},update:function(t){this.fly&&(this.node.y+=9e3*t,this.node.x+=this.arrowRotation*t),this.node.y>5e3&&(this.fly=!1,this.yLength=0,this.node.x=this.startX,this.node.y=this.startY)}}),cc._RF.pop()},{}],close:[function(t,e,o){"use strict";cc._RF.push(e,"efebfzq6xlL0oR4mvTh84ey","close"),cc.Class({extends:cc.Component,properties:{scroll:{default:null,type:cc.ScrollView},item:{default:null,type:cc.Prefab}},addTop:function(){var t=cc.instantiate(this.item);this.scroll.content.addChild(t)},showTop:function(){this.scroll.node.active=!0},hideTop:function(){this.scroll.node.active=!1},getData:function(){var t=this;new window.SAVE.AV.Query("Todo").find().then(function(e){var o=JSON.parse(JSON.stringify(e));console.log("\u4e91\u7aef\u6570\u636e\u4e3a:"),console.log(o),o.sort(function(t,e){return e.score-t.score}),o.map(function(e,o){t.addTop();var n=t.scroll.content.children[o];n.children[0].getComponent(cc.Label).string=o+1,n.children[1].getComponent(cc.Label).string=e.name,n.children[2].getComponent(cc.Label).string=e.score,n.y-=30*o})},function(t){})},onLoad:function(){this.getData()}}),cc._RF.pop()},{}],goal:[function(t,e,o){"use strict";cc._RF.push(e,"14711+mPe5GKo0ZLTdQ5TYs","goal"),cc.Class({extends:cc.Component,properties:{},shootAction:function(){var t=5*this.node.getChildByName("break-arrow").rotation,e=cc.moveBy(.5,cc.v2(t,0)).easing(cc.easeCubicActionOut()),o=cc.moveBy(.5,cc.v2(0,30)).easing(cc.easeCubicActionOut());return cc.spawn(e,o)},dropAction:function(){var t=t=10*this.node.children[this.node.children.length-1].rotation,e=cc.moveBy(.15,cc.v2(t,100)).easing(cc.easeCubicActionOut()),o=cc.moveBy(2,cc.v2(t,-2e3)).easing(cc.easeCubicActionIn()),n=this.node.getChildByName("break-arrow").rotation>0?180:-180,c=cc.rotateBy(2,n);return cc.spawn(c,cc.sequence(e,o))},onLoad:function(){this.stopMove=!1,this.arrowAdded=!1,cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(t,e){if(!this.arrowAdded){var o=void 0,n=void 0;-1!==e.name.indexOf("chicken")?(o=1,n=50):-1!==e.name.indexOf("duck")?(o=1,n=50):-1!==e.name.indexOf("dinosaur")?(o=3,n=150):-1!==e.name.indexOf("fish")?(o=2,n=120):-1!==e.name.indexOf("cat")?(o=2,n=120):-1!==e.name.indexOf("boat")?(o=3,n=150):-1!==e.name.indexOf("loong")&&(o=5,n=300),this.main.addScore(10),t.getComponent("arrow").fly=!1;var c=t.node.parent.convertToWorldSpaceAR(cc.v2(t.node.getPosition().x,t.node.getPosition().y+(t.node.height/2-240))),i=t.node.parent.rotation,r=1/e.node.scale*.21,a=e.node.convertToNodeSpaceAR(c);this.main.addBreakArrow(this.node,i,r,a),this.node.children.length<o?e.node.runAction(this.shootAction()):(this.arrowAdded=!0,this.main.addScore(n),this.stopMove=!0,e.node.runAction(this.dropAction())),t.node.destroy(),this.main.delayAddArrow(this.main.arch.getComponent("arch").node)}},start:function(){},update:function(t){this.stopMove||(this.node.x-=100*t),(this.node.x<-this.node.parent.width/2-100||this.node.y<-this.node.parent.height/2-500)&&this.node.destroy()}}),cc._RF.pop()},{}],input:[function(t,e,o){"use strict";cc._RF.push(e,"4cc75xcBeND97qyEAqkZg1m","input"),cc.Class({extends:cc.Component,properties:{user:{default:null,type:cc.Label}},onEditDidBegan:function(t,e){},onEditDidEnded:function(t,e){},onTextChanged:function(t,e,o){cc.sys.localStorage.setItem("name",t),this.user.string=t,cc.sys.localStorage.removeItem("id")},onEditingReturn:function(t,e){},start:function(){}}),cc._RF.pop()},{}],line:[function(t,e,o){"use strict";cc._RF.push(e,"63e370I0vlJ5Jr5XVkY874K","line"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},update:function(t){var e=this.node.parent.getChildByName("arrow");if(e){var o=this.node.getComponent(cc.Graphics),n=e.position.x,c=e.position.y-e.height/2+120;o.clear(),o.moveTo(-738,-220),c<-219&&o.lineTo(n,c),o.lineTo(742,-220),o.stroke()}}}),cc._RF.pop()},{}],main:[function(t,e,o){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","main"),cc.Class({extends:cc.Component,properties:{arch:{default:null,type:cc.Sprite},time:{default:null,type:cc.Label},score:{default:null,type:cc.Label},arrow:{default:null,type:cc.Prefab},breakArrow:{default:null,type:cc.Prefab},goal1:{default:null,type:cc.Prefab},goal2:{default:null,type:cc.Prefab},goal3:{default:null,type:cc.Prefab},goal4:{default:null,type:cc.Prefab},goal5:{default:null,type:cc.Prefab},goal6:{default:null,type:cc.Prefab},goal7:{default:null,type:cc.Prefab}},addBreakArrowPool:function(){this.breakArrowPool=new cc.NodePool;for(var t=0;t<5;++t)this.breakArrowPool.put(cc.instantiate(this.breakArrow))},addBreakArrow:function(t,e,o,n){var c=null;(c=this.breakArrowPool.size()>0?this.breakArrowPool.get():cc.instantiate(this.breakArrow)).rotation=e,c.scale=o,c.setPosition(n),t.addChild(c)},addArrowPool:function(){this.arrowPool=new cc.NodePool;for(var t=0;t<5;++t)this.arrowPool.put(cc.instantiate(this.arrow))},addArrow:function(t){var e=null;e=this.arrowPool.size()>0?this.arrowPool.get():cc.instantiate(this.arrow),t.addChild(e)},delayAddArrow:function(t){var e=this;setTimeout(function(){t.getChildByName("arrow")||e.addArrow(t)},100)},addGoal:function(){var t=this;this.addGoalTime=setInterval(function(){var e=Math.round(6*Math.random())+1,o=t["goal"+e],n=cc.instantiate(o);t.node.addChild(n);var c=t.node.width/2+n.width*n.scale/2,i=Math.random()*t.node.height/4+t.node.height/4-n.height/2*n.scale;n.setPosition(cc.v2(c,i)),n.getComponent("goal").main=t},1500)},timing:function(){var t=this,e=60,o=setInterval(function(){if(0===e)return t.pause(),void clearInterval(o);e-=1,t.time.string="\u5012\u8ba1\u65f6: "+e},1e3)},pause:function(){window.Global={score:this.scorePoint},cc.sys.localStorage.getItem("score")<this.scorePoint&&cc.sys.localStorage.setItem("score",this.scorePoint),cc.director.loadScene("start",function(){}),clearInterval(this.addGoalTime)},addScore:function(t){this.scorePoint+=t,this.score.string="\u5f97\u5206: "+this.scorePoint},onLoad:function(){this.timing(),this.scorePoint=0,this.addGoal(),this.addBreakArrowPool(),this.addArrowPool(),this.addArrow(this.arch.getComponent("arch").node)},update:function(t){}}),cc._RF.pop()},{}],startScene:[function(t,e,o){"use strict";cc._RF.push(e,"988e12eL+1EmaOhHaeTVKwu","startScene"),cc.Class({extends:cc.Component,properties:{highScore:{default:null,type:cc.Label},score:{default:null,type:cc.Label},user:{default:null,type:cc.Label},startBtn:{default:null,type:cc.Label},scroll:{default:null,type:cc.ScrollView}},postScore:function(){var e=void 0;if(window.SAVE&&window.SAVE.AV?e=window.SAVE.AV:((e=t("leancloud-storage")).init("2kq3azst6ToDirUHcGqAdnNp-gzGzoHsz","lUAeHSFwalgva7GU4vpRT6Lo"),window.SAVE={AV:e}),cc.sys.localStorage.getItem("id"))var o=e.Object.createWithoutData("Todo",cc.sys.localStorage.getItem("id"));else{o=new(e.Object.extend("Todo"));cc.sys.localStorage.getItem("name")&&o.set("name",cc.sys.localStorage.getItem("name"))}cc.sys.localStorage.getItem("name")&&(o.set("score",cc.sys.localStorage.getItem("score")),o.save().then(function(t){console.log("New object created with objectId: "+t.id),cc.sys.localStorage.setItem("id",t.id)},function(t){console.error("Failed to create new object, with error message: "+t.message)}))},onLoad:function(){this.scroll.node.active=!1,window.Global?(this.score.string="\u672c\u5c40\u5f97\u5206: "+window.Global.score,this.startBtn.string="\u91cd\u65b0\u5f00\u59cb"):this.score.destroy(),cc.sys.localStorage.getItem("score")?this.highScore.string="\u5386\u53f2\u6700\u9ad8\u5f97\u5206: "+cc.sys.localStorage.getItem("score"):this.highScore.destroy(),cc.sys.localStorage.getItem("name")&&(this.user.string=cc.sys.localStorage.getItem("name")),this.postScore()}}),cc._RF.pop()},{"leancloud-storage":void 0}],start:[function(t,e,o){"use strict";cc._RF.push(e,"451e7JBgPpJ8IC9puPet0R2","start"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.preloadScene("main")},startGame:function(){cc.director.loadScene("main",function(){console.log("main is loaded")})}}),cc._RF.pop()},{}],top:[function(t,e,o){"use strict";cc._RF.push(e,"e93546Zi7lN1bd0ypB5NiPo","top"),cc.Class({extends:cc.Component,properties:{scroll:{default:null,type:cc.ScrollView}},showTop:function(){this.scroll.node.active=!0},hideTop:function(){this.scroll.node.active=!1},onLoad:function(){}}),cc._RF.pop()},{}]},{},["arch","arrow","close","goal","input","line","main","start","startScene","top"]);